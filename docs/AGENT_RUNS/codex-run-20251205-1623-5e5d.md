**Analysis**

- The runtime config now lives at `/srv/prompt-valet/config/prompt-valet.yaml`; `rg --files -g'prompt-valet.yaml'` discovers that canonical copy and confirms no auxiliary files still reference an outdated name.

- The two Python scripts that need to load the shared config are `scripts/codex_watcher.py` and `scripts/rebuild_inbox_tree.py`. They now converge on `/srv/prompt-valet/config/prompt-valet.yaml` for runtime settings and aligned watcher defaults.
  - `codex_watcher.py` now uses `DEFAULT_CONFIG_PATH = Path("/srv/prompt-valet/config/prompt-valet.yaml")`. Its `DEFAULT_CONFIG` keeps `tree_builder` and `watcher` sections for auto-clone, git defaults, `git_protocol`, and runner settings, and `load_config()` merges the canonical YAML file with those defaults while ensuring the inbox/processed/repos roots exist before handing the merged result to the watcher.
  - `rebuild_inbox_tree.py` points at the same YAML path, includes `git_protocol` in its watcher defaults, and merges the config file over the tree_builder section so the tree-builder shares the watcher’s git owner/host/protocol values.

- Current config loading details:
  - `codex_watcher.py`: merges `DEFAULT_CONFIG` with the YAML file at `/srv/prompt-valet/config/prompt-valet.yaml`, falls back to defaults when the file is absent or malformed, normalizes directory roots, and then logs `[prompt-valet] loaded config=... inbox=... processed=... git_owner=... git_host=... git_protocol=... runner=...exec`.
  - `rebuild_inbox_tree.py`: merges the same YAML file into its defaults (including `git_protocol`), and emits the matching startup log so its git owner/host/protocol values stay in sync with the watcher.

- Target behavior after this checkpoint:
- Canonical config is `/srv/prompt-valet/config/prompt-valet.yaml`.
- Both scripts load that file via the shared default path, keep their current inbox/processed/repos/git defaults, and emit the single startup log `[prompt-valet] loaded config=<path> inbox=<inbox_dir> processed=<processed_dir> git_owner=<owner> git_host=<host> git_protocol=<proto> runner=<cmd>` even when relying on defaults.

**Plan for Section B**

1. **Config file rename/creation:** ensure the canonical `/srv/prompt-valet/config/prompt-valet.yaml` exists alongside a matching in-repo template (e.g., `configs/prompt-valet.yaml`) so both scripts can source the same layout with minimal drift.

2. **`codex_watcher.py` overhaul:** point the default config path at `/srv/prompt-valet/config/prompt-valet.yaml`, keep the `DEFAULT_CONFIG` layout for tree_builder/watchers, load the YAML with `yaml.safe_load()`, normalize the merged values, and emit the `[prompt-valet] ...` startup log line describing the resolved config path, inbox, processed, git owner/host/protocol, and runner command.

3. **`rebuild_inbox_tree.py` tweaks:** use the same YAML path, include `git_protocol` in the watcher defaults, and emit the matching `[prompt-valet] ...` log line so the two scripts expose identical startup metadata.

4. **Documentation sweep:** replace every `/docs` reference to an obsolete config filename or path with `prompt-valet.yaml` (at `/srv/prompt-valet/config/prompt-valet.yaml`) so the documentation matches the current config layout.

5. **Final checks:** confirm the legacy config filename no longer appears anywhere in the repository, and run `python3 -m py_compile` on both scripts to catch any syntax issues introduced while wiring the shared config/logging behavior.

I’ll stop here without touching any files and execute Section B once you confirm this plan.
